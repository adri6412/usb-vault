BR2_arm=y
BR2_cortex_a7=y
BR2_ARM_FPU_VFPV3D16=y
BR2_ARM_EABIHF=y

# Base defconfig for Raspberry Pi Zero W is raspberrypi0w_defconfig in newer BR, raspberrypi0_defconfig otherwise
# We'll start from raspberrypi0_defconfig in the script below and then apply these fragments via defconfig append

# Use systemd as init system
BR2_INIT_SYSTEMD=y
BR2_INIT_BUSYBOX=n
BR2_PACKAGE_SYSTEMD=y
BR2_PACKAGE_SYSTEMD_UTILS=y
BR2_PACKAGE_SYSTEMD_NETWORKD=y
BR2_PACKAGE_SYSTEMD_RESOLVED=y
BR2_PACKAGE_SYSTEMD_TIMESYNCD=y

# Disable BusyBox completely
BR2_PACKAGE_BUSYBOX=n
BR2_SYSTEM_BIN_SH_BUSYBOX=n
BR2_SYSTEM_BIN_SH_BASH=y

# Networking
BR2_PACKAGE_HOSTAPD=y
BR2_PACKAGE_DNSMASQ=y
BR2_PACKAGE_IFUPDOWN_SCRIPTS=y
BR2_PACKAGE_NETIFRC=y

# C++ runtime and libraries
BR2_TOOLCHAIN_BUILDROOT_CXX=y
BR2_PACKAGE_LIBSTDCPP=y

# SQLite3 for database
BR2_PACKAGE_SQLITE=y

# OpenSSL for crypto operations
BR2_PACKAGE_OPENSSL=y
BR2_PACKAGE_OPENSSL_BIN=y

# Argon2 for password hashing
BR2_PACKAGE_LIBARGON2=y

# Additional utilities
BR2_PACKAGE_UTIL_LINUX=y
BR2_PACKAGE_UTIL_LINUX_LIBUUID=y
BR2_PACKAGE_UTIL_LINUX_LIBBLKID=y

# Rootfs overlay
BR2_ROOTFS_OVERLAY="${OVERLAY_DIR}"

# Enable VaultUSB C++ package
BR2_PACKAGE_VAULTUSB_CPP=y

# Enable systemd service at boot
BR2_SYSTEM_DHCP="eth0"
