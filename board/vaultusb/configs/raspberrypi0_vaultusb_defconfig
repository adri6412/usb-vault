# VaultUSB C++ Configuration for Raspberry Pi Zero
# Based on raspberrypi0_defconfig but with C++ and VaultUSB specific settings

# Target architecture
BR2_arm=y
BR2_cortex_a53=y
BR2_ARM_FPU_VFPV4=y

# Toolchain
BR2_TOOLCHAIN_BUILDROOT_CXX=y
BR2_PACKAGE_LIBSTDCPP=y

# System configuration
BR2_INIT_BUSYBOX=y
BR2_INIT_SYSTEMD=n
BR2_PACKAGE_SYSTEMD=n

# Core packages
BR2_PACKAGE_BUSYBOX=y
BR2_PACKAGE_BUSYBOX_CONFIG_FRAGMENT_FILES=""

# Networking
BR2_PACKAGE_DHCPCD=y
BR2_PACKAGE_DNSMASQ=y
BR2_PACKAGE_HOSTAPD=y
BR2_PACKAGE_WPA_SUPPLICANT=y
BR2_PACKAGE_WPA_SUPPLICANT_CLI=y
BR2_PACKAGE_IFUPDOWN_SCRIPTS=y
BR2_PACKAGE_NETIFRC=y

# Database and crypto
BR2_PACKAGE_SQLITE=y
BR2_PACKAGE_SQLITE_READLINE=y
BR2_PACKAGE_SQLITE_UTILS=y
BR2_PACKAGE_OPENSSL=y
BR2_PACKAGE_OPENSSL_BIN=y
BR2_PACKAGE_LIBARGON2=y

# System utilities
BR2_PACKAGE_UTIL_LINUX=y
BR2_PACKAGE_UTIL_LINUX_LIBUUID=y
BR2_PACKAGE_UTIL_LINUX_LIBBLKID=y
BR2_PACKAGE_PROCPS_NG=y
BR2_PACKAGE_PSMISC=y

# Filesystem
BR2_PACKAGE_E2FSPROGS=y
BR2_PACKAGE_DOSFSTOOLS=y
BR2_PACKAGE_MTOOLS=y

# VaultUSB C++ application
BR2_PACKAGE_VAULTUSB_CPP=y

# Kernel configuration
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_VERSION=y
BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE="6.1.69"
BR2_LINUX_KERNEL_DEFCONFIG="bcmrpi_defconfig"
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_DTB_OVERLAY_SUPPORT=y
BR2_LINUX_KERNEL_DTB_OVERLAY=y

# Bootloader
BR2_TARGET_UBOOT=y
BR2_TARGET_UBOOT_BOARDNAME="rpi_0_w"
BR2_TARGET_UBOOT_CUSTOM_VERSION=y
BR2_TARGET_UBOOT_CUSTOM_VERSION_VALUE="2023.10"
BR2_TARGET_UBOOT_NEEDS_DTC=y

# Root filesystem
BR2_TARGET_ROOTFS_EXT2=y
BR2_TARGET_ROOTFS_EXT2_SIZE="120M"
BR2_TARGET_ROOTFS_EXT2_BLOCKSIZE=4096
BR2_TARGET_ROOTFS_EXT2_INODES=8192
BR2_TARGET_ROOTFS_EXT2_RESBLKS=0
BR2_TARGET_ROOTFS_EXT2_LABEL="rootfs"
BR2_TARGET_ROOTFS_EXT2_GEN=4
BR2_TARGET_ROOTFS_EXT2_REV=1

# Disable systemd completely
BR2_PACKAGE_SYSTEMD_UTILS=n
BR2_PACKAGE_SYSTEMD_BOOT=n
BR2_PACKAGE_SYSTEMD_NETWORKD=n
BR2_PACKAGE_SYSTEMD_RESOLVED=n
BR2_PACKAGE_SYSTEMD_TIMESYNCD=n
BR2_PACKAGE_SYSTEMD_ANALYZE=n
BR2_PACKAGE_SYSTEMD_CATALOG=n
BR2_PACKAGE_SYSTEMD_COREDUMP=n
BR2_PACKAGE_SYSTEMD_FIRSTBOOT=n
BR2_PACKAGE_SYSTEMD_HIBERNATE=n
BR2_PACKAGE_SYSTEMD_IMPORT=n
BR2_PACKAGE_SYSTEMD_LOCALED=n
BR2_PACKAGE_SYSTEMD_MACHINED=n
BR2_PACKAGE_SYSTEMD_POLKIT=n
BR2_PACKAGE_SYSTEMD_QUOTACHECK=n
BR2_PACKAGE_SYSTEMD_RANDOMSEED=n
BR2_PACKAGE_SYSTEMD_RFKILL=n
BR2_PACKAGE_SYSTEMD_SMACKSUPPORT=n
BR2_PACKAGE_SYSTEMD_SYSUSERS=n
BR2_PACKAGE_SYSTEMD_VCONSOLE=n
BR2_PACKAGE_SYSTEMD_XDG_AUTOSTART=n
BR2_PACKAGE_SYSTEMD_XORG_LAUNCH_HELPER=n
BR2_PACKAGE_SYSTEMD_ZSH_COMPLETION=n
